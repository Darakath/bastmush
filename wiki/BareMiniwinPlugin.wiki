#summary A start of a miniwindow plugin
#labels Author-Bast,Deprecated

= Please see [CreatingPluginsBasedOnBastmush] =

{{{
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>

<muclient>
<plugin
   name="Test_Window_Plugin"
   author="Bast"
   id="c4510331407cb4281bea544e"
   language="Lua"
   purpose="test miniwindow functionality"
   save_state="y"
   date_written="2009-02-28 20:14:46"
   requires="4.40"
   version="2.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<script>
<![CDATA[

require "var"
require "serialize"
require "commas"
require "pluginhelper"
require "verify"
require "tprint"
require "miniwin"

-- create an instance of the miniwindow
mwin =  Miniwin:new{name="NewWin"}


]]>
</script>

<script>
<![CDATA[

function OnPluginBroadcast (msg, id, name, text)

  phelper:OnPluginBroadcast(msg, id, name, text)
end

function OnPluginInstall ()
  --OnPluginEnable is automatically called by pluginhelper

  phelper:OnPluginInstall()
end -- OnPluginInstall

function OnPluginClose ()

  phelper:OnPluginClose()
end -- OnPluginClose

function OnPluginEnable ()
  phelper:OnPluginEnable()

  -- always enable a miniwindow after the phelper:OnPluginEnable() call
  mwin:enable()
  -- An optional fourth argument can be added (true or false) to automatically switch to that tab
  mwin:addtab('default', {"This is the window body"}, {"This is the window header"})
  mwin:show(true)
end -- OnPluginEnable

function OnPluginDisable ()

  phelper:OnPluginDisable()
end -- OnPluginDisable

function OnPluginConnect ()

  phelper:OnPluginConnect()
end -- function OnPluginConnect

function OnPluginDisconnect ()

  phelper:OnPluginDisconnect()
end -- function OnPluginConnect

function OnPluginSaveState ()

  phelper:OnPluginSaveState()
end -- function OnPluginSaveState

]]>
</script>

<script>
<![CDATA[

phelper:set_default('cmd', 'example')
phelper:set_default('plugin_colour', 'red')

-- always add windows to phelper
phelper:add_pobject('win', mwin)

phelper:enable()

]]>
</script>

</muclient>
}}}