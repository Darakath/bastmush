#summary Plugin to broadcast quest info
#labels Author-Bast

=== Table of Contents ===
<wiki:toc max_depth="2" />

= Introduction =
 * Author: Bast
 * this is a plugin that broadcasts info about quests
 * [miniwin_quest] uses it

= Installation ==
 * see the [Installation] page

= Troubleshooting =
 * run the command "bqu debug" to enable debugging

= Help =
 {{{
/*
[FOR PLUGIN AUTHORS ONLY]

Broadcasts when anything happens in a quest
Broadcasts
   1 - can now quest
   2 - Mob info : get var.quest_info and loadstring it
        see below
   3 - time left to finish quest
        timer = {secs = num, text = 'time in text format' }
   4 - quest mob killed
   5 - length of quest, get var.quest_info and loadstring it
        see below
   6 - rewards : get var.quest_info and loadstring it, values will be 0 if not applicable
        see below
   7 - time left until next quest
        timer = {secs = num, text = 'time in text format' }
   8 - failed the quest

Example:
  function OnPluginBroadcast (msg, id, name, text)
    if id == "aaa8a9eda20fa11787c6b438" and msg == 2 then
      local pvar = GetPluginVariable(  "aaa8a9eda20fa11787c6b438" , "quest_info")

      --get the mob info
      loadstring( pvar )()
      quest_stuff = quest_info
    end
  end
  
xBroadcast_Quest : Broadcast 2
quest_info = {}
  quest_info.starttime = 1275869546
  quest_info.lucky = 0
  quest_info.mobroom = "In the Corridor"
  quest_info.mobarea = "Tir na nOg"
  quest_info.tier = 0
  quest_info.trains = 0
  quest_info.tp = 0
  quest_info.mccp = 0
  quest_info.pracs = 0
  quest_info.gold = 0
  quest_info.finishtime = -1
  quest_info.mobname = "Cu Roi, the Sorcerer"
  quest_info.failed = 0
  quest_info.qp = 0
  
xBroadcast_Quest : Broadcast 3
timer = {}
  timer.text = "44 m"
  timer.secs = 2640

xBroadcast_Quest : Broadcast 5
quest_info = {}
  quest_info.starttime = 1275869546
  quest_info.lucky = 0
  quest_info.mobroom = "In the Corridor"
  quest_info.mobarea = "Tir na nOg"
  quest_info.tier = 0
  quest_info.trains = 0
  quest_info.tp = 0
  quest_info.mccp = 0
  quest_info.pracs = 0
  quest_info.gold = 0
  quest_info.finishtime = 1275869582
  quest_info.mobname = "Cu Roi, the Sorcerer"
  quest_info.failed = 0
  quest_info.qp = 0

xBroadcast_Quest : Broadcast 7
timer = {}
  timer.text = "28 m"
  timer.secs = 1707


*/
 }}}